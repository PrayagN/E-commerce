<%- include('../admin/header.ejs')   %>












<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"> -->

	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">LapMania</span>
		</a>
		<ul class="side-menu top">
			<li >
				<a href="/admin/home">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="/admin/customers">
                    <i class='bx bxs-user-account'></i> 
					<span class="text">Customers</span>
				</a>
			</li>
			<li >
				<a href="/admin/orders">
					<i class='bx bxs-shopping-bags' ></i>
					<span class="text">Orders</span>
				</a>
			</li >
			<li >
				<a href="/admin/category">
					<i class='bx bx-category' ></i>
					<span class="text">Categories</span>
				</a>
			</li>
            <li class="active" >
				<a href="/admin/Products">
                    <i class='bx bxs-cart-alt' ></i>
					<span class="text">Products</span>
				</a>
			</li>
            <li >
				<a href="/admin/banner">
					<i class='bx bxs-carousel'></i>
					<span class="text">Banner</span>
				</a>
			</li>
            <li >
				<a href="/admin/coupon">
					<i class='bx bxs-coupon'></i>
					<span class="text">Coupon</span>
				</a>
			</li>
      <li  >
				<a href="/admin/sales">
					<i class='bx bx-money' ></i>
					<span class="text">Sales</span>
				</a>
			</li>
			
		</ul>
		<ul class="side-menu">
			
			<li >
				<a href="/admin/logout" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
        <nav>
			<i class='bx bx-menu'  style="display: none;"></i>
			<a href="#" class="nav-link" style="display: none;">Categories</a>
			<form action="#">
				<div class="form-input" style="display: none;">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">10</span>
			</a>
			<a href="#" class="profile">
				<img src="img/people.png">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Products</h1>
					<ul class="breadcrumb">
						<li>
							<a class="active" href="/admin/Products">Products</a>
						</li>
              <li>
                <li><i class='bx bx-chevron-right' ></i></li>
							<a class="active" href="/admin/productdetails?id=<%=product._id%>">Product Details</a>
						</li>
            <li>
              <li><i class='bx bx-chevron-right' ></i></li>
            <a class="active" href="#">Edit Products</a>
          </li>
					</ul>
				</div>
                
			</div>



    <!-- <div class="container py-5"> -->
    
      
    <div class="" style="border-radius: 20px; background-color: #f9f9f9;"> 
      <div class="row d-flex justify-content-center  ">
        
        <div class="col-lg-12 " >
          <div class="card mb-4 mt-3 me-4" style="background-color: #f9f9f9;">
            <div class="card-body">
              <form action="" method="post" enctype="multipart/form-data">
              <div class="row ">
                <div class="col-sm-3">
                  <p class="mb-0">Product</p>
                </div>
                <div class="col-sm-9">
                    <input type="text" name="name" style="border: none;" value="<%= product.name %>"  >
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Gross Price</p>
                </div>
                <div class="col-sm-9">
                <input type="number" name="price" style=" border: none;" value="<%= product.price %>"   >
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0"> Offer Price</p>
                </div>
                <div class="col-sm-9">
                <input type="number" name="offerPrice" style=" border: none;" value="<%= product.offerPrice %>" >
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Image</p>
                </div>
                <div class="col-sm-9 " >
                  <div class="custom-file d-flex">
                    <input type="file" name="image1" multiple  class="custom-file-input" onchange="viewFirst(event)"   data-parsley-trigger ="change" id="customFile" >
                    <input type="file" name="image2" multiple  class="custom-file-input" onchange="viewSecond(event)"   data-parsley-trigger ="change" id="customFile" >
                    <input type="file" name="image3" multiple  class="custom-file-input" onchange="viewThird(event)"  data-parsley-trigger ="change" id="customFile" >
                    <input type="file" name="image4" multiple  class="custom-file-input" onchange="viewFourth(event)"  data-parsley-trigger ="change" id="customFile" >

                </div>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Brand</p>
                </div>
                <div class="col-sm-9">
                <input type="text" name="brand" style=" border: none;"value="<%= product.brand %>"  >
                </div>
              </div>
              <hr>
              <% if(product.processor){%>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Processor</p>
                  </div>
                  <div class="col-sm-9">
                  <input type="text" name="processor" style=" border: none;" value="<%=product.processor%>" >
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Ram Memory</p>
                  </div>
                  <div class="col-sm-9">
                  <input type="text" name="ram" style=" border: none;" value="<%=product.ram%>" >
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Storage</p>
                  </div>
                  <div class="col-sm-9">
                  <input type="text" name="storage" style=" border: none;" value="<%=product.ssd%>" >
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Operating System</p>
                  </div>
                  <div class="col-sm-9">
                  <input type="text" name="os" style=" border: none;" value="<%=product.operatingSystem %>" >
                  </div>
                </div>
                <hr>
             <% }else{%>

            <% }%>
              
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Categories</p>
                </div>
                <div class="col-sm-9">
                <select style="border: none;" name="categories1" >
                  
                  <% for(category of categories){%>
                    <option value="<%= category._id %>">
                      <%= category.name %>
                    </option>
                  <% } %>
                </select>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Stock</p>
                </div>
                <div class="col-sm-9">
                    <input type="number" name="stock"  style="width: 100px; border: none;" value="<%= product.stocks %>" >
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0"> Description</p>
                </div>
                <div class="col-sm-9">
                    <!-- <input type="text" style="width: 500px; height: 200px; border:none" > -->
                    <textarea name="description" id="" cols="30" rows="10" style="width: 500px; height: 200px;" ><%= product.description %> </textarea>
                </div>
              </div>
              <input type="hidden" name="id" value="<%= product._id %>">
              <button type="submit" class="btn btn-primary">Save</button>
              <div class="container"  >
                
              </div>
              </form>
              <div class="form-group my-4 d-flex">
                <div class="input-group ">
                    <div class="input-group-append mb-3 d-flex justify-content-between">
                        <img src="/productImages/<%= product.image[0] %>" class="mx-4 rounded"
                            alt="alt preview-icon" id="first" width="200" height="200">
                        <img src="/productImages/<%= product.image[1] %>" class="mx-5 rounded"
                            alt="alt preview-icon" id="second" width="200" height="200">
                        <img src="/productImages/<%= product.image[2] %>" class="mx-5 rounded"
                            alt="alt preview-icon" id="third" width="200" height="200">
                        <img src="/productImages/<%= product.image[3] %>" class="mx-5 rounded"
                            alt="alt preview-icon" id="fourth" width="200" height="200">
                    </div>
                </div>
            </div>
              <!-- <% product.image.forEach((image) => { %> -->
                  <!-- <img src="/productImages/<%= image %>" class="d-block w-100" alt="..."> -->
                  <!-- <div class="d-flex mt-3">
                    <input type="text" name="name" style="border: none;" value="<%= image %>" ><button class="ms-5 border-0" style="background: transparent;" onclick="removeimg('<%= image %>')"><i class='bx bx-x bx-tada text-danger' ></i></button>
                  </div>
                  
                <% }) %>
                 -->
            </div>
          </div>

    </div>
			
            
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->
   


<script>
  function viewFirst(event) {
            document.getElementById('first').src = URL.createObjectURL(event.target.files[0])
        }
        function viewSecond(event) {
            document.getElementById('second').src = URL.createObjectURL(event.target.files[0])
        }
        function viewThird(event) {
            document.getElementById('third').src = URL.createObjectURL(event.target.files[0])
        }
        function viewFourth(event) {
            document.getElementById('fourth').src = URL.createObjectURL(event.target.files[0])
        }

  function removeimg(image){
    console.log("sdfsdf");
    $.ajax({
      
      url:`/admin/removeimg/${image}`,
      method:'get',
      success:function(response){
        if(response.status === true){
          const productId = response.product;
          window.location.reload()
        }else{
          console.log("cant delete");
        }
      }
    })
  }

</script>












<%- include('../admin/footer.ejs') %>