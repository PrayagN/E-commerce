
<%- include('../admin/header.ejs') %>
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"> -->
	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">LapMania</span>
		</a>
		<ul class="side-menu top">
			<li >
				<a href="/admin/home">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="/admin/customers">
                    <i class='bx bxs-user-account'></i> 
					<span class="text">Customers</span>
				</a>
			</li>
			<li class="active" >
				<a href="/admin/orders">
					<i class='bx bxs-shopping-bags' ></i>
					<span class="text">Orders</span>
				</a>
			</li >
			<li >
				<a href="/admin/category">
					<i class='bx bx-category' ></i>
					<span class="text">Categories</span>
				</a>
			</li>
            <li >
				<a href="/admin/Products">
                    <i class='bx bxs-cart-alt' ></i>
					<span class="text">Products</span>
				</a>
			</li>
            <li >
				<a href="/admin/banner">
					<i class='bx bxs-carousel'></i>
					<span class="text">Banner</span>
				</a>
			</li>
            <li >
				<a href="/admin/coupon">
					<i class='bx bxs-coupon'></i>
					<span class="text">Coupon</span>
				</a>
			</li>
			<li  >
				<a href="/admin/sales">
					<i class='bx bx-money' ></i>
					<span class="text">Sales</span>
				</a>
			</li>
			
		</ul>
		<ul class="side-menu">
			
			<li >
				<a href="/admin/logout" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
        <nav>
			<i class='bx bx-menu' style="display: none;" ></i>
			<a href="#" class="nav-link" style="display: none;">Categories</a>
			<form action="#">
				<div class="form-input" style="display: none;">
					<input type="search" placeholder="Search..." >
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a>
			<a href="#" class="profile">
				<img src="img/people.png">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Orders</h1>
					<ul class="breadcrumb">
						<li>
							<!-- <a href="/admin/customers">Order</a> -->
						</li>
						<!-- <li><i class='bx bx-chevron-right' ></i></li> -->
						<!-- <li>
							<a class="active" href="/admin/customers">Customers</a>
						</li> -->
					</ul>
				</div>
				
			</div>
			<ul class="box-info">
				<li style="width: 300px;">
					<i class='bx bx-check-circle   text-white' style="background-color: #26a541;" ></i>
					<span class="text">
						<h3><%=completedOrders%></h3>
						<p>Completed</p>
					</span>
				</li>
				<li style="width: 300px;">
					<i class='bx bx-pause-circle bg-info text-white' ></i>
					<span class="text">
						<h3><%=pendingOrders%></h3>
						<p>Pending</p>
					</span>
				</li>
				<li style="width: 300px;">
					<i class='bx bxs-x-circle  bg-danger text-white ' ></i>	
					<span class="text">
						<h3><%=cancelledOrders%></h3>
						<p>Cancelled</p>
					</span>
				</li>
				
				
			</ul>

            <div class="table-data">
				<div class="order">
					<div class="head">
						<h3>Order List</h3>
                        <!-- <nav> 
                            <form action="#">
                                <div class="form-input">
                                    <input type="search" id="myInput" onkeyup="myFunction()" name="search" placeholder="Search...">
                                    <button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
                                </div>
                            </form>
                            </nav> -->
						
					</div>
                    
					<table id="myTable" >
						<thead>
							<tr>
                                <th>Sl.No</th>
								<th>OrderID</th>
                                <th>Name</th>
                                <th>Date</th>
							    <th>Payment</th>
                                <th>Status</th>
                                <th>Action</th>
							</tr>


                            
						</thead>

						<tbody>
                        
							<% 
                                if(orders.length > 0){
                                    for(let i=0; i <orders.length; i++){
                                        %>
                                        <tr >
                                            <td><%= i+1 %></td>
                                            <td><%= orders[i]._id %></td>
                                            <td><%= orders[i].userId.name %></td>
                                            <td><%= orders[i].date%></td>
                                
											<td><% if(orders[i].paymentStatus == 'Cancelled'){%>
												<span style="background-color:#fa5252;" class="status completed"><%=orders[i].paymentStatus%></span></td>
											   
											   <%}else if(orders[i].paymentStatus == 'Completed') {%>
												<span style="background-color:#26a541;" class="status completed"><%=orders[i].paymentStatus%></span></td>
												
											   <%}else if(orders[i].paymentStatus == 'Refunded') {%>
													<span style="background-color:orange;" class="status completed"><%=orders[i].paymentStatus%></span></td>
											   <%}else if(orders[i].paymentStatus == 'Pending') {%>
														<span  class="status completed bg-info"><%=orders[i].paymentStatus%></span></td>
													  
											   <%}%>
						
						
											   <td><% if(orders[i].orderStatus == 'Cancelled'){%>
												<span style="background-color:#fa5252;" class="status completed"><%=orders[i].orderStatus%></span></td>
											   
											   <%}else if(orders[i].orderStatus == 'Delivered') {%>
												<span style="background-color:#26a541;" class="status completed"><%=orders[i].orderStatus%></span></td>
												
											   <%}else if(orders[i].orderStatus == 'Placed') {%>
													<span style="background-color:blue;" class="status completed"><%=orders[i].orderStatus%></span></td>
											   <%}else if(orders[i].orderStatus == 'Out for Delivery') {%>
														<span style="background-color:cornflowerblue;" class="status completed"><%=orders[i].orderStatus%></span></td>
													  
											   <%}%></td>
			                  <td> <a href="/admin/orderDetails?id=<%=orders[i]._id%>" class="btn btn-outline-info">Info</a>
                                              </td>

                                        </tr>
                                        <%
                                    }
                                }else{

                                    %>
                                    <tr> 
                                    <td colspan = "5">Orders Not Found </td>
                                    </tr>
                                    <%
                                }
                            %>
							
						</tbody>
					</table>
				</div>
            
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->
   

	
    <%- include('../admin/footer.ejs') %>